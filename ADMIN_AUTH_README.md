# 管理员认证功能说明

## 功能概述

为了保护管理后台的安全，现已添加账号密码登录的鉴权功能。只有通过身份验证的用户才能访问管理界面。

## 默认登录凭据

- **用户名**: `admin`
- **密码**: `admin123`

## 功能特性

### 1. 登录界面
- 美观的登录表单界面
- 用户名和密码输入验证
- 密码显示/隐藏切换
- 登录状态加载提示
- 错误提示信息

### 2. 认证机制
- 基于本地存储的会话管理
- 24小时自动过期机制
- 页面刷新后保持登录状态
- 安全的登出功能

### 3. 路由保护
- 未登录用户自动跳转到登录页面
- 登录后直接访问管理界面
- 登出后清除所有认证信息

## 配置说明

### 环境变量配置

在 `.env.local` 文件中可以自定义管理员凭据：

```env
# 管理员登录凭据
NEXT_PUBLIC_ADMIN_USERNAME=your_username
NEXT_PUBLIC_ADMIN_PASSWORD=your_password
```

### 生产环境安全建议

1. **修改默认凭据**: 在生产环境中务必修改默认的用户名和密码
2. **使用强密码**: 建议使用包含大小写字母、数字和特殊字符的复杂密码
3. **定期更换**: 定期更换管理员密码以提高安全性
4. **HTTPS部署**: 在生产环境中使用HTTPS协议保护数据传输

## 使用方法

### 1. 访问管理后台

访问 `http://localhost:3002/admin` 将自动跳转到登录页面（如果未登录）。

### 2. 登录

1. 输入用户名和密码
2. 点击"登录"按钮
3. 验证成功后自动跳转到管理界面

### 3. 登出

在管理界面右上角点击"登出"按钮即可安全退出。

## 技术实现

### 组件结构

- `AdminLogin.tsx`: 登录界面组件
- `AuthContext.tsx`: 认证状态管理上下文
- `admin/page.tsx`: 受保护的管理页面

### 认证流程

1. 用户访问管理页面
2. 检查本地存储中的认证token
3. 验证token有效性和过期时间
4. 未认证用户显示登录界面
5. 已认证用户显示管理界面

### 安全特性

- 密码不会明文存储
- 使用Base64编码生成简单token
- 自动过期机制防止长期占用
- 登出时清除所有认证信息

## 故障排除

### 常见问题

1. **无法登录**
   - 检查用户名和密码是否正确
   - 确认环境变量配置是否正确
   - 清除浏览器缓存和本地存储

2. **登录后自动退出**
   - 检查系统时间是否正确
   - 确认token未过期（24小时有效期）

3. **页面无法访问**
   - 确认开发服务器正在运行
   - 检查端口是否被占用
   - 查看控制台错误信息

## 后续改进建议

1. **数据库存储**: 将用户凭据存储在数据库中而非环境变量
2. **JWT认证**: 使用更安全的JWT token机制
3. **多用户支持**: 支持多个管理员账户
4. **权限管理**: 实现细粒度的权限控制
5. **登录日志**: 记录登录活动和安全事件
6. **双因素认证**: 添加2FA提高安全性